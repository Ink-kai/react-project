<!--
 * @Author: ink ink_kai@163.com
 * @Date: 2022-12-18 14:44:31
 * @LastEditors: lin
 * @LastEditTime: 2022-12-18 15:03:21
 * @FilePath: \project\gk-studycourse\1.html
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function handleFetch(limit, timeout) {
        limit = limit || 1;
        timeout = timeout || 0;
        var count = 0,
          pool = [];
        return function (url) {
          var task = () =>
            new Promise((resolve, reject) => {
              fetch(url)
                .then((res) => resolve(res))
                .catch((err) => reject(err));
            });
        };
        if (count >= limit) {
          pool.push(task);
        } else {
          ++count;
          task();
        }
      }
      var _fetch = handleFetch(300);
      _fetch();
      _fetch();
      _fetch();
      _fetch();
    </script>
  </body>
</html>
